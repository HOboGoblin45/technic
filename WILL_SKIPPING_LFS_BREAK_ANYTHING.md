# Will Skipping LFS Downloads Break Technic?

## Short Answer: **NO - It's Safe!**

The `training_data.parquet` file is **optional** and the code handles its absence gracefully.

---

## What the File Is Used For

The `training_data.parquet` file is used by the **meta_experience** module to provide historical context like:

- "This setup ranks in the top 5% of prior samples"
- "Similar-score bucket outcomes: 5d avg 2.3%, 10d win 65%"

It's basically **nice-to-have explanatory text**, not core functionality.

---

## How the Code Handles Missing File

### 1. Graceful Fallback (meta_experience.py)

```python
DEFAULT_META_PATHS: list[Path] = [
    Path(os.getenv("TECHNIC_META_DATA_PATH", "")),
    Path("data/training_data_v2.parquet"),      # Tries this first
    Path("data/training_data.parquet"),          # Then this
    Path("technic_v4/scanner_output/history/replay_ics.parquet"),  # Fallback
]

def load_meta_experience() -> Optional[MetaExperience]:
    for path in DEFAULT_META_PATHS:
        if not path or str(path) in {"", "."}:
            continue
        if path.is_dir():
            continue
        try:
            meta = MetaExperience.from_parquet(path)
            if meta is not None:
                logger.info("[META] loaded meta experience from %s", path)
                return meta
        except Exception as exc:
            logger.warning("[META] failed to load: %s", exc)
    
    # Returns None if all paths fail - THIS IS FINE!
    return None
```

### 2. Safe Usage

```python
def describe_row(row: pd.Series) -> str:
    meta = load_meta_experience()
    if meta is None:
        return ""  # Just returns empty string - no crash!
    return meta.describe_row(row)
```

---

## What Happens Without the File

**Scanner will:**
- ✅ Run normally
- ✅ Generate all scores (TechRating, AlphaScore, MERIT, etc.)
- ✅ Return all results
- ✅ Work perfectly

**What you'll miss:**
- ❌ Historical context text (e.g., "top 5% of samples")
- ❌ Bucket outcome summaries

**Impact:** Minimal - this is just explanatory text, not core signals.

---

## Alternative: Use Fallback File

The code also looks for:
```
technic_v4/scanner_output/history/replay_ics.parquet
```

This file is **generated by your own scans** over time. So even without the training data, after a few scans, you'll have historical data to use!

---

## Recommendation

**Set `GIT_LFS_SKIP_SMUDGE=1` - It's completely safe!**

### Why It's Safe:
1. Code has try/except around file loading
2. Returns None if file missing
3. Scanner checks for None and continues
4. Only loses optional explanatory text
5. Fallback file will be generated from your scans

### What You Keep:
- ✅ All scanning functionality
- ✅ All scores and signals
- ✅ All ML predictions
- ✅ MERIT scores
- ✅ Everything critical

### What You Lose (Temporarily):
- ❌ Historical context text (minor feature)

---

## Long-Term Solution

After deployment works, you can:

1. **Regenerate the file** on Render:
   ```bash
   python scripts/build_training_data.py
   ```

2. **Or just let it build naturally:**
   - As you run scans, `replay_ics.parquet` accumulates
   - After a few weeks, you'll have your own historical data
   - This is actually better (real production data!)

---

## CONCLUSION

**Setting `GIT_LFS_SKIP_SMUDGE=1` will NOT break anything important.**

It's a safe workaround that lets you deploy immediately. The missing file only affects optional explanatory text that most users won't even notice.

**Go ahead and set the environment variable - your scanner will work perfectly!**
